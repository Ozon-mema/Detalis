-- –°–µ—Ä–≤–∏—Å—ã
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Teams = game:GetService("Teams")
local Player = Players.LocalPlayer
-- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "HydrogenHUBFlingGUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = game:GetService("CoreGui")
-- –ì–ª–∞–≤–Ω—ã–π —Ñ—Ä–µ–π–º
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 300, 0, 400)
MainFrame.Position = UDim2.new(0.5, -150, 0.5, -200)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui
-- –ó–∞–≥–æ–ª–æ–≤–æ–∫
local TitleBar = Instance.new("Frame")
TitleBar.Size = UDim2.new(1, 0, 0, 30)
TitleBar.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
TitleBar.BorderSizePixel = 0
TitleBar.Parent = MainFrame
-- –ù–∞–∑–≤–∞–Ω–∏–µ
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, -30, 1, 0)
Title.BackgroundTransparency = 1
Title.Text = "üèÜHydrogenHUB Universal FlingüèÜ"
Title.TextColor3 = Color3.fromRGB(80, 180, 255)
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 16
Title.Parent = TitleBar
-- –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
local CloseButton = Instance.new("TextButton")
CloseButton.Position = UDim2.new(1, -30, 0, 0)
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
CloseButton.BorderSizePixel = 0
CloseButton.Text = "X"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.Font = Enum.Font.SourceSansBold
CloseButton.TextSize = 18
CloseButton.Parent = TitleBar
-- –°—Ç–∞—Ç—É—Å
local StatusLabel = Instance.new("TextLabel")
StatusLabel.Position = UDim2.new(0, 10, 0, 40)
StatusLabel.Size = UDim2.new(1, -20, 0, 25)
StatusLabel.BackgroundTransparency = 1
StatusLabel.Text = "–í—ã–±–µ—Ä–∏—Ç–µ —Ü–µ–ª–∏ –¥–ª—è —Ñ–ª–∏–Ω–≥–∞"
StatusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
StatusLabel.Font = Enum.Font.SourceSans
StatusLabel.TextSize = 16
StatusLabel.TextXAlignment = Enum.TextXAlignment.Left
StatusLabel.Parent = MainFrame
-- –§—Ä–µ–π–º –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞
local ModeFrame = Instance.new("Frame")
ModeFrame.Position = UDim2.new(0, 10, 0, 70)
ModeFrame.Size = UDim2.new(1, -20, 0, 30)
ModeFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
ModeFrame.BorderSizePixel = 0
ModeFrame.Parent = MainFrame
-- –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞
local ModeLabel = Instance.new("TextLabel")
ModeLabel.Size = UDim2.new(0, 120, 1, 0)
ModeLabel.BackgroundTransparency = 1
ModeLabel.Text = "–†–µ–∂–∏–º –≤—ã–±–æ—Ä–∞:"
ModeLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
ModeLabel.Font = Enum.Font.SourceSans
ModeLabel.TextSize = 14
ModeLabel.TextXAlignment = Enum.TextXAlignment.Left
ModeLabel.Parent = ModeFrame
local ModeDropdown = Instance.new("TextButton")
ModeDropdown.Position = UDim2.new(0, 125, 0, 5)
ModeDropdown.Size = UDim2.new(0, 150, 0, 20)
ModeDropdown.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
ModeDropdown.BorderSizePixel = 0
ModeDropdown.Text = "–ò–≥—Ä–æ–∫–∏"
ModeDropdown.TextColor3 = Color3.fromRGB(255, 255, 255)
ModeDropdown.Font = Enum.Font.SourceSans
ModeDropdown.TextSize = 14
ModeDropdown.Parent = ModeFrame
-- –§—Ä–µ–π–º –≤—ã–±–æ—Ä–∞ –∫–æ–º–∞–Ω–¥—ã (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç)
local TeamFrame = Instance.new("Frame")
TeamFrame.Position = UDim2.new(0, 10, 0, 105)
TeamFrame.Size = UDim2.new(1, -20, 0, 30)
TeamFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
TeamFrame.BorderSizePixel = 0
TeamFrame.Visible = false
TeamFrame.Parent = MainFrame
-- –í—ã–±–æ—Ä –∫–æ–º–∞–Ω–¥—ã
local TeamLabel = Instance.new("TextLabel")
TeamLabel.Size = UDim2.new(0, 120, 1, 0)
TeamLabel.BackgroundTransparency = 1
TeamLabel.Text = "–ö–æ–º–∞–Ω–¥–∞:"
TeamLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TeamLabel.Font = Enum.Font.SourceSans
TeamLabel.TextSize = 14
TeamLabel.TextXAlignment = Enum.TextXAlignment.Left
TeamLabel.Parent = TeamFrame
local TeamDropdown = Instance.new("TextButton")
TeamDropdown.Position = UDim2.new(0, 125, 0, 5)
TeamDropdown.Size = UDim2.new(0, 150, 0, 20)
TeamDropdown.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
TeamDropdown.BorderSizePixel = 0
TeamDropdown.Text = "–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É"
TeamDropdown.TextColor3 = Color3.fromRGB(255, 255, 255)
TeamDropdown.Font = Enum.Font.SourceSans
TeamDropdown.TextSize = 14
TeamDropdown.Parent = TeamFrame
-- –§—Ä–µ–π–º –≤—ã–±–æ—Ä–∞ –∏–≥—Ä–æ–∫–æ–≤
local SelectionFrame = Instance.new("Frame")
SelectionFrame.Position = UDim2.new(0, 10, 0, 140)
SelectionFrame.Size = UDim2.new(1, -20, 0, 200)
SelectionFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
SelectionFrame.BorderSizePixel = 0
SelectionFrame.Parent = MainFrame
-- –°–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤
local PlayerScrollFrame = Instance.new("ScrollingFrame")
PlayerScrollFrame.Position = UDim2.new(0, 5, 0, 5)
PlayerScrollFrame.Size = UDim2.new(1, -10, 1, -10)
PlayerScrollFrame.BackgroundTransparency = 1
PlayerScrollFrame.BorderSizePixel = 0
PlayerScrollFrame.ScrollBarThickness = 6
PlayerScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
PlayerScrollFrame.Parent = SelectionFrame
-- –ö–Ω–æ–ø–∫–∞ —Å—Ç–∞—Ä—Ç–∞
local StartButton = Instance.new("TextButton")
StartButton.Position = UDim2.new(0, 10, 0, 350)
StartButton.Size = UDim2.new(0.5, -15, 0, 40)
StartButton.BackgroundColor3 = Color3.fromRGB(0, 180, 0)
StartButton.BorderSizePixel = 0
StartButton.Text = "–ù–ê–ß–ê–¢–¨ –§–õ–ò–ù–ì"
StartButton.TextColor3 = Color3.fromRGB(255, 255, 255)
StartButton.Font = Enum.Font.SourceSansBold
StartButton.TextSize = 18
StartButton.Parent = MainFrame
-- –ö–Ω–æ–ø–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
local StopButton = Instance.new("TextButton")
StopButton.Position = UDim2.new(0.5, 5, 0, 350)
StopButton.Size = UDim2.new(0.5, -15, 0, 40)
StopButton.BackgroundColor3 = Color3.fromRGB(180, 0, 0)
StopButton.BorderSizePixel = 0
StopButton.Text = "–û–°–¢–ê–ù–û–í–ò–¢–¨"
StopButton.TextColor3 = Color3.fromRGB(255, 255, 255)
StopButton.Font = Enum.Font.SourceSansBold
StopButton.TextSize = 18
StopButton.Parent = MainFrame
-- –ö–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä–∞
local SelectAllButton = Instance.new("TextButton")
SelectAllButton.Position = UDim2.new(0, 10, 0, 400)
SelectAllButton.Size = UDim2.new(0.5, -15, 0, 30)
SelectAllButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
SelectAllButton.BorderSizePixel = 0
SelectAllButton.Text = "–í–´–ë–†–ê–¢–¨ –í–°–ï–•"
SelectAllButton.TextColor3 = Color3.fromRGB(255, 255, 255)
SelectAllButton.Font = Enum.Font.SourceSans
SelectAllButton.TextSize = 14
SelectAllButton.Parent = MainFrame
local DeselectAllButton = Instance.new("TextButton")
DeselectAllButton.Position = UDim2.new(0.5, 5, 0, 400)
DeselectAllButton.Size = UDim2.new(0.5, -15, 0, 30)
DeselectAllButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
DeselectAllButton.BorderSizePixel = 0
DeselectAllButton.Text = "–°–ë–†–û–°–ò–¢–¨ –í–´–ë–û–†"
DeselectAllButton.TextColor3 = Color3.fromRGB(255, 255, 255)
DeselectAllButton.Font = Enum.Font.SourceSans
DeselectAllButton.TextSize = 14
DeselectAllButton.Parent = MainFrame
-- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
local SelectedTargets = {}
local PlayerCheckboxes = {}
local FlingActive = false
local CurrentMode = "players" -- "players" –∏–ª–∏ "team"
local SelectedTeam = nil
local TeamPlayers = {}
getgenv().OldPos = nil
getgenv().FPDH = workspace.FallenPartsDestroyHeight
-- –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∏–≥—Ä–æ–∫–æ–≤
local function RefreshPlayerList()
    -- –û—á–∏—Å—Ç–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π
    for _, child in pairs(PlayerScrollFrame:GetChildren()) do
        child:Destroy()
    end
    PlayerCheckboxes = {}
    
    local PlayerList = {}
    
    if CurrentMode == "players" then
        -- –†–µ–∂–∏–º –≤—ã–±–æ—Ä–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤
        local allPlayers = Players:GetPlayers()
        for _, player in ipairs(allPlayers) do
            if player ~= Player then
                table.insert(PlayerList, player)
            end
        end
    else
        -- –†–µ–∂–∏–º –≤—ã–±–æ—Ä–∞ –∫–æ–º–∞–Ω–¥—ã
        PlayerList = TeamPlayers
    end
    
    -- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏–≥—Ä–æ–∫–æ–≤
    table.sort(PlayerList, function(a, b) return a.Name:lower() < b.Name:lower() end)
    
    -- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–≥—Ä–æ–∫–∞
    local yPosition = 5
    for _, player in ipairs(PlayerList) do
        -- –°–æ–∑–¥–∞–Ω–∏–µ —Ñ—Ä–µ–π–º–∞ –∏–≥—Ä–æ–∫–∞
        local PlayerEntry = Instance.new("Frame")
        PlayerEntry.Size = UDim2.new(1, -10, 0, 30)
        PlayerEntry.Position = UDim2.new(0, 5, 0, yPosition)
        PlayerEntry.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
        PlayerEntry.BorderSizePixel = 0
        PlayerEntry.Parent = PlayerScrollFrame
        
        -- –ß–µ–∫–±–æ–∫—Å
        local Checkbox = Instance.new("TextButton")
        Checkbox.Size = UDim2.new(0, 24, 0, 24)
        Checkbox.Position = UDim2.new(0, 3, 0.5, -12)
        Checkbox.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
        Checkbox.BorderSizePixel = 0
        Checkbox.Text = ""
        Checkbox.Parent = PlayerEntry
        
        -- –ì–∞–ª–æ—á–∫–∞ (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –Ω–µ–≤–∏–¥–∏–º–∞)
        local Checkmark = Instance.new("TextLabel")
        Checkmark.Size = UDim2.new(1, 0, 1, 0)
        Checkmark.BackgroundTransparency = 1
        Checkmark.Text = "‚úì"
        Checkmark.TextColor3 = Color3.fromRGB(0, 255, 0)
        Checkmark.TextSize = 18
        Checkmark.Font = Enum.Font.SourceSansBold
        Checkmark.Visible = SelectedTargets[player.Name] ~= nil
        Checkmark.Parent = Checkbox
        
        -- –ú–µ—Ç–∫–∞ –∏–º–µ–Ω–∏ –∏–≥—Ä–æ–∫–∞
        local NameLabel = Instance.new("TextLabel")
        NameLabel.Size = UDim2.new(1, -35, 1, 0)
        NameLabel.Position = UDim2.new(0, 30, 0, 0)
        NameLabel.BackgroundTransparency = 1
        NameLabel.Text = player.Name
        if CurrentMode == "team" and SelectedTeam then
            NameLabel.Text = player.Name .. " (" .. SelectedTeam.Name .. ")"
        end
        NameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
        NameLabel.TextSize = 16
        NameLabel.Font = Enum.Font.SourceSans
        NameLabel.TextXAlignment = Enum.TextXAlignment.Left
        NameLabel.Parent = PlayerEntry
        
        -- –û–±–ª–∞—Å—Ç—å –¥–ª—è –∫–ª–∏–∫–∞
        local ClickArea = Instance.new("TextButton")
        ClickArea.Size = UDim2.new(1, 0, 1, 0)
        ClickArea.BackgroundTransparency = 1
        ClickArea.Text = ""
        ClickArea.ZIndex = 2
        ClickArea.Parent = PlayerEntry
        
        -- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ
        ClickArea.MouseButton1Click:Connect(function()
            if SelectedTargets[player.Name] then
                SelectedTargets[player.Name] = nil
                Checkmark.Visible = false
            else
                SelectedTargets[player.Name] = player
                Checkmark.Visible = true
            end
            
            UpdateStatus()
        end)
        
        -- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ UI –∏–≥—Ä–æ–∫–∞
        PlayerCheckboxes[player.Name] = {
            Entry = PlayerEntry,
            Checkmark = Checkmark
        }
        
        yPosition = yPosition + 35
    end
    
    -- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
    PlayerScrollFrame.CanvasSize = UDim2.new(0, 0, 0, yPosition + 5)
end
-- –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥
local function RefreshTeamList()
    local teams = Teams:GetTeams()
    if #teams == 0 then
        TeamDropdown.Text = "–ù–µ—Ç –∫–æ–º–∞–Ω–¥"
        return
    end
    
    -- –°–æ–∑–¥–∞–Ω–∏–µ —Ñ—Ä–µ–π–º–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∫–æ–º–∞–Ω–¥—ã
    local TeamSelectionFrame = Instance.new("Frame")
    TeamSelectionFrame.Size = UDim2.new(0, 200, 0, 150)
    TeamSelectionFrame.Position = UDim2.new(0.5, -100, 0.5, -75)
    TeamSelectionFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    TeamSelectionFrame.BorderSizePixel = 0
    TeamSelectionFrame.ZIndex = 10
    TeamSelectionFrame.Visible = false
    TeamSelectionFrame.Parent = ScreenGui
    
    local TeamScroll = Instance.new("ScrollingFrame")
    TeamScroll.Size = UDim2.new(1, -10, 1, -10)
    TeamScroll.Position = UDim2.new(0, 5, 0, 5)
    TeamScroll.BackgroundTransparency = 1
    TeamScroll.ScrollBarThickness = 6
    TeamScroll.CanvasSize = UDim2.new(0, 0, 0, #teams * 30)
    TeamScroll.Parent = TeamSelectionFrame
    
    local yPos = 0
    for _, team in ipairs(teams) do
        local TeamButton = Instance.new("TextButton")
        TeamButton.Size = UDim2.new(1, -10, 0, 25)
        TeamButton.Position = UDim2.new(0, 5, 0, yPos)
        TeamButton.BackgroundColor3 = team.TeamColor.Color
        TeamButton.BorderSizePixel = 0
        TeamButton.Text = team.Name
        TeamButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        TeamButton.Font = Enum.Font.SourceSans
        TeamButton.TextSize = 14
        TeamButton.Parent = TeamScroll
        
        TeamButton.MouseButton1Click:Connect(function()
            SelectedTeam = team
            TeamDropdown.Text = team.Name
            TeamDropdown.BackgroundColor3 = team.TeamColor.Color
            
            -- –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã
            TeamPlayers = {}
            for _, player in ipairs(Players:GetPlayers()) do
                if player.Team == team and player ~= Player then
                    table.insert(TeamPlayers, player)
                end
            end
            
            -- –û—á–∏—Å—Ç–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ü–µ–ª–µ–π –ø—Ä–∏ —Å–º–µ–Ω–µ –∫–æ–º–∞–Ω–¥—ã
            SelectedTargets = {}
            
            RefreshPlayerList()
            UpdateStatus()
            TeamSelectionFrame.Visible = false
        end)
        
        yPos = yPos + 30
    end
    
    -- –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –≤—ã–±–æ—Ä –∫–æ–º–∞–Ω–¥—ã
    TeamDropdown.MouseButton1Click:Connect(function()
        TeamSelectionFrame.Visible = not TeamSelectionFrame.Visible
    end)
end
-- –ü–æ–¥—Å—á–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ü–µ–ª–µ–π
local function CountSelectedTargets()
    local count = 0
    for _ in pairs(SelectedTargets) do
        count = count + 1
    end
    return count
end
-- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
local function UpdateStatus()
    local count = CountSelectedTargets()
    if FlingActive then
        StatusLabel.Text = "–§–ª–∏–Ω–≥ " .. count .. " —Ü–µ–ª–∏(–µ–π)"
        StatusLabel.TextColor3 = Color3.fromRGB(255, 80, 80)
    else
        if CurrentMode == "team" and SelectedTeam then
            StatusLabel.Text = "–ö–æ–º–∞–Ω–¥–∞: " .. SelectedTeam.Name .. " (" .. count .. " –∏–≥—Ä–æ–∫–æ–≤)"
        else
            StatusLabel.Text = "–í—ã–±—Ä–∞–Ω–æ " .. count .. " —Ü–µ–ª–∏(–µ–π)" 
        end
        StatusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    end
end
-- –§—É–Ω–∫—Ü–∏—è –≤—ã–±–æ—Ä–∞/—Å–±—Ä–æ—Å–∞ –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤
local function ToggleAllPlayers(select)
    local PlayerList = {}
    
    if CurrentMode == "players" then
        for _, player in ipairs(Players:GetPlayers()) do
            if player ~= Player then
                table.insert(PlayerList, player)
            end
        end
    else
        PlayerList = TeamPlayers
    end
    
    for _, player in ipairs(PlayerList) do
        local checkboxData = PlayerCheckboxes[player.Name]
        if checkboxData then
            if select then
                SelectedTargets[player.Name] = player
                checkboxData.Checkmark.Visible = true
            else
                SelectedTargets[player.Name] = nil
                checkboxData.Checkmark.Visible = false
            end
        end
    end
    
    UpdateStatus()
end
-- –°–º–µ–Ω–∞ —Ä–µ–∂–∏–º–∞ –≤—ã–±–æ—Ä–∞
local function ChangeMode(newMode)
    CurrentMode = newMode
    
    if newMode == "players" then
        ModeDropdown.Text = "–ò–≥—Ä–æ–∫–∏"
        TeamFrame.Visible = false
        SelectionFrame.Position = UDim2.new(0, 10, 0, 105)
        MainFrame.Size = UDim2.new(0, 300, 0, 400)
    else
        ModeDropdown.Text = "–ö–æ–º–∞–Ω–¥–∞"
        TeamFrame.Visible = true
        SelectionFrame.Position = UDim2.new(0, 10, 0, 140)
        MainFrame.Size = UDim2.new(0, 300, 0, 430)
        
        -- –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –Ω–µ –≤—ã–±—Ä–∞–Ω–∞, –≤—ã–±—Ä–∞—Ç—å –ø–µ—Ä–≤—É—é –¥–æ—Å—Ç—É–ø–Ω—É—é
        if not SelectedTeam then
            local teams = Teams:GetTeams()
            if #teams > 0 then
                SelectedTeam = teams[1]
                TeamDropdown.Text = SelectedTeam.Name
                TeamDropdown.BackgroundColor3 = SelectedTeam.TeamColor.Color
                
                -- –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã
                TeamPlayers = {}
                for _, player in ipairs(Players:GetPlayers()) do
                    if player.Team == SelectedTeam and player ~= Player then
                        table.insert(TeamPlayers, player)
                    end
                end
            else
                TeamDropdown.Text = "–ù–µ—Ç –∫–æ–º–∞–Ω–¥"
            end
        end
    end
    
    -- –û—á–∏—Å—Ç–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ü–µ–ª–µ–π –ø—Ä–∏ —Å–º–µ–Ω–µ —Ä–µ–∂–∏–º–∞
    SelectedTargets = {}
    
    RefreshPlayerList()
    UpdateStatus()
end
-- –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
local function Message(Title, Text, Time)
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = Title,
        Text = Text,
        Duration = Time or 5
    })
end
-- –§—É–Ω–∫—Ü–∏—è —Ñ–ª–∏–Ω–≥–∞ –æ—Ç zqyDSUWX
local function SkidFling(TargetPlayer)
    local Character = Player.Character
    local Humanoid = Character and Character:FindFirstChildOfClass("Humanoid")
    local RootPart = Humanoid and Humanoid.RootPart
    local TCharacter = TargetPlayer.Character
    if not TCharacter then return end
    
    local THumanoid
    local TRootPart
    local THead
    local Accessory
    local Handle
    if TCharacter:FindFirstChildOfClass("Humanoid") then
        THumanoid = TCharacter:FindFirstChildOfClass("Humanoid")
    end
    if THumanoid and THumanoid.RootPart then
        TRootPart = THumanoid.RootPart
    end
    if TCharacter:FindFirstChild("Head") then
        THead = TCharacter.Head
    end
    if TCharacter:FindFirstChildOfClass("Accessory") then
        Accessory = TCharacter:FindFirstChildOfClass("Accessory")
    end
    if Accessory and Accessory:FindFirstChild("Handle") then
        Handle = Accessory.Handle
    end
    if Character and Humanoid and RootPart then
        if RootPart.Velocity.Magnitude < 50 then
            getgenv().OldPos = RootPart.CFrame
        end
        
        if THumanoid and THumanoid.Sit then
            return Message("–û—à–∏–±–∫–∞", TargetPlayer.Name .. " —Å–∏–¥–∏—Ç", 2)
        end
        
        if THead then
            workspace.CurrentCamera.CameraSubject = THead
        elseif Handle then
            workspace.CurrentCamera.CameraSubject = Handle
        elseif THumanoid and TRootPart then
            workspace.CurrentCamera.CameraSubject = THumanoid
        end
        
        if not TCharacter:FindFirstChildWhichIsA("BasePart") then
            return
        end
        
        local FPos = function(BasePart, Pos, Ang)
            RootPart.CFrame = CFrame.new(BasePart.Position) * Pos * Ang
            Character:SetPrimaryPartCFrame(CFrame.new(BasePart.Position) * Pos * Ang)
            RootPart.Velocity = Vector3.new(9e7, 9e7 * 10, 9e7)
            RootPart.RotVelocity = Vector3.new(9e8, 9e8, 9e8)
        end
        
                local SFBasePart = function(BasePart)
            local TimeToWait = 2
            local Time = tick()
            local Angle = 0
            repeat
                if RootPart and THumanoid then
                    if BasePart.Velocity.Magnitude < 50 then
                        Angle = Angle + 100
                        FPos(BasePart, CFrame.new(0, 1.5, 0) + THumanoid.MoveDirection * BasePart.Velocity.Magnitude / 1.25, CFrame.Angles(math.rad(Angle),0 ,0))
                        task.wait()
                        FPos(BasePart, CFrame.new(0, -1.5, 0) + THumanoid.MoveDirection * BasePart.Velocity.Magnitude / 1.25, CFrame.Angles(math.rad(Angle), 0, 0))
                        task.wait()
                        FPos(BasePart, CFrame.new(0, 1.5, 0) + THumanoid.MoveDirection * BasePart.Velocity.Magnitude / 1.25, CFrame.Angles(math.rad(Angle),0 ,0))
                        task.wait()
                        FPos(BasePart, CFrame.new(0, -1.5, 0) + THumanoid.MoveDirection * BasePart.Velocity.Magnitude / 1.25, CFrame.Angles(math.rad(Angle), 0, 0))
                        task.wait()
                        FPos(BasePart, CFrame.new(0, 1.5, 0) + THumanoid.MoveDirection, CFrame.Angles(math.rad(Angle),0 ,0))
                        task.wait()
                        FPos(BasePart, CFrame.new(0, -1.5, 0) + THumanoid.MoveDirection, CFrame.Angles(math.rad(Angle), 0, 0))
                        task.wait()
                    else
                        FPos(BasePart, CFrame.new(0, 1.5, THumanoid.WalkSpeed), CFrame.Angles(math.rad(90), 0, 0))
                        task.wait()
                        FPos(BasePart, CFrame.new(0, -1.5, -THumanoid.WalkSpeed), CFrame.Angles(0, 0, 0))
                        task.wait()
                        FPos(BasePart, CFrame.new(0, 1.5, THumanoid.WalkSpeed), CFrame.Angles(math.rad(90), 0, 0))
                        task.wait()
                        
                        FPos(BasePart, CFrame.new(0, -1.5, 0), CFrame.Angles(math.rad(90), 0, 0))
                        task.wait()
                        FPos(BasePart, CFrame.new(0, -1.5, 0), CFrame.Angles(0, 0, 0))
                        task.wait()
                        FPos(BasePart, CFrame.new(0, -1.5, 0), CFrame.Angles(math.rad(90), 0, 0))
                        task.wait()
                        FPos(BasePart, CFrame.new(0, -1.5, 0), CFrame.Angles(0, 0, 0))
                        task.wait()
                    end
                end
            until Time + TimeToWait < tick() or not FlingActive
        end
        
        workspace.FallenPartsDestroyHeight = 0/0
        
        local BV = Instance.new("BodyVelocity")
        BV.Parent = RootPart
        BV.Velocity = Vector3.new(0, 0, 0)
        BV.MaxForce = Vector3.new(9e9, 9e9, 9e9)
        
        Humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated, false)
        
        if TRootPart then
            SFBasePart(TRootPart)
        elseif THead then
            SFBasePart(THead)
        elseif Handle then
            SFBasePart(Handle)
        else
            return Message("–û—à–∏–±–∫–∞", TargetPlayer.Name .. " –Ω–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —á–∞—Å—Ç–µ–π", 2)
        end
        
        BV:Destroy()
        Humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated, true)
        workspace.CurrentCamera.CameraSubject = Humanoid
        
        -- –°–±—Ä–æ—Å –ø–æ–∑–∏—Ü–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
        if getgenv().OldPos then
            repeat
                RootPart.CFrame = getgenv().OldPos * CFrame.new(0, .5, 0)
                Character:SetPrimaryPartCFrame(getgenv().OldPos * CFrame.new(0, .5, 0))
                Humanoid:ChangeState("GettingUp")
                for _, part in pairs(Character:GetChildren()) do
                    if part:IsA("BasePart") then
                        part.Velocity, part.RotVelocity = Vector3.new(), Vector3.new()
                    end
                end
                task.wait()
            until (RootPart.Position - getgenv().OldPos.p).Magnitude < 25
            workspace.FallenPartsDestroyHeight = getgenv().FPDH
        end
    else
        return Message("–û—à–∏–±–∫–∞", "–í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–∂ –Ω–µ –≥–æ—Ç–æ–≤", 2)
    end
end
-- –ù–∞—á–∞—Ç—å —Ñ–ª–∏–Ω–≥ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ü–µ–ª–µ–π
local function StartFling()
    if FlingActive then return end
    
    local count = CountSelectedTargets()
    if count == 0 then
        StatusLabel.Text = "–¶–µ–ª–∏ –Ω–µ –≤—ã–±—Ä–∞–Ω—ã!"
        wait(1)
        UpdateStatus()
        return
    end
    
    FlingActive = true
    UpdateStatus()
    Message("–ó–∞–ø—É—â–µ–Ω–æ", "–§–ª–∏–Ω–≥ " .. count .. " —Ü–µ–ª–∏(–µ–π)", 2)
    
    -- –ó–∞–ø—É—Å–∫ —Ñ–ª–∏–Ω–≥–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ
    spawn(function()
        while FlingActive do
            local validTargets = {}
            
            -- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Ü–µ–ª–µ–π –Ω–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å
            for name, player in pairs(SelectedTargets) do
                if player and player.Parent then
                    validTargets[name] = player
                else
                    -- –£–¥–∞–ª–µ–Ω–∏–µ –≤—ã—à–µ–¥—à–∏—Ö –∏–≥—Ä–æ–∫–æ–≤
                    SelectedTargets[name] = nil
                    local checkbox = PlayerCheckboxes[name]
                    if checkbox then
                        checkbox.Checkmark.Visible = false
                    end
                end
            end
            
            -- –§–ª–∏–Ω–≥ –∫–∞–∂–¥–æ–π –≤–∞–ª–∏–¥–Ω–æ–π —Ü–µ–ª–∏
            for _, player in pairs(validTargets) do
                if FlingActive then
                    SkidFling(player)
                    -- –ù–µ–±–æ–ª—å—à–∞—è –ø–∞—É–∑–∞ –º–µ–∂–¥—É —Ü–µ–ª—è–º–∏
                    wait(0.1)
                else
                    break
                end
            end
            
            -- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
            UpdateStatus()
            
            -- –ü–∞—É–∑–∞ –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º —Ü–∏–∫–ª–æ–º
            wait(0.5)
        end
    end)
end
-- –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–ª–∏–Ω–≥
local function StopFling()
    if not FlingActive then return end
    
    FlingActive = false
    
    UpdateStatus()
    Message("–û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ", "–§–ª–∏–Ω–≥ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω", 2)
end
-- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–Ω–æ–ø–æ–∫
StartButton.MouseButton1Click:Connect(StartFling)
StopButton.MouseButton1Click:Connect(StopFling)
SelectAllButton.MouseButton1Click:Connect(function() ToggleAllPlayers(true) end)
DeselectAllButton.MouseButton1Click:Connect(function() ToggleAllPlayers(false) end)
CloseButton.MouseButton1Click:Connect(function()
    StopFling()
    ScreenGui:Destroy()
end)
-- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–º–µ–Ω—ã —Ä–µ–∂–∏–º–∞
ModeDropdown.MouseButton1Click:Connect(function()
    if CurrentMode == "players" then
        ChangeMode("team")
    else
        ChangeMode("players")
    end
end)
-- –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è/–≤—ã—Ö–æ–¥–∞ –∏–≥—Ä–æ–∫–æ–≤ –∏ —Å–º–µ–Ω—ã –∫–æ–º–∞–Ω–¥
Players.PlayerAdded:Connect(function(player)
    RefreshPlayerList()
    RefreshTeamList()
end)
Players.PlayerRemoving:Connect(function(player)
    if SelectedTargets[player.Name] then
        SelectedTargets[player.Name] = nil
    end
    RefreshPlayerList()
    RefreshTeamList()
    UpdateStatus()
end)
-- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–º–µ–Ω—ã –∫–æ–º–∞–Ω–¥ –∏–≥—Ä–æ–∫–∞–º–∏
local function onPlayerTeamChanged(player)
    if CurrentMode == "team" and SelectedTeam then
        -- –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤ –∫–æ–º–∞–Ω–¥—ã –µ—Å–ª–∏ —Ä–µ–∂–∏–º –∫–æ–º–∞–Ω–¥—ã –∞–∫—Ç–∏–≤–µ–Ω
        TeamPlayers = {}
        for _, p in ipairs(Players:GetPlayers()) do
            if p.Team == SelectedTeam and p ~= Player then
                table.insert(TeamPlayers, p)
            end
        end
        RefreshPlayerList()
        UpdateStatus()
    end
end

for _, player in ipairs(Players:GetPlayers()) do
    player:GetPropertyChangedSignal("Team"):Connect(function()
        onPlayerTeamChanged(player)
    end)
end
-- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
RefreshTeamList()
RefreshPlayerList()
UpdateStatus()
ChangeMode("players") -- –ù–∞—á–∞—Ç—å –≤ —Ä–µ–∂–∏–º–µ –≤—ã–±–æ—Ä–∞ –∏–≥—Ä–æ–∫–æ–≤
-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ
Message("–ó–∞–≥—Ä—É–∂–µ–Ω–æ", "üèÜHydrogenHUB Universal Fling –∑–∞–≥—Ä—É–∂–µ–Ω!", 3)

print("Loaded(‚Å†„Éª‚Å†o‚Å†„Éª‚Å†)")
